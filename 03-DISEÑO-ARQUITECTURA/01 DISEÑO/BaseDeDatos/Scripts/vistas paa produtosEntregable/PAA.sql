CREATE ALGORITHM=UNDEFINED DEFINER=`admin`@`%` SQL SECURITY DEFINER VIEW `vt_paa_aprobado` AS select row_number() OVER (ORDER BY `cp`.`id_anhio` desc )  AS `id`,`cp`.`id_anhio` AS `id_anhio`,'PAA_Aprobado' AS `origen`,`cp`.`cve_unidad` AS `cve_unidad`,concat(convert(right(`cp`.`id_anhio`,2) using utf8mb3),left(`cp`.`cve_unidad`,1),`cp`.`cve_proyecto`) AS `cve_proyecto`,`cp`.`cx_nombre_proyecto` AS `cx_nombre_proyecto`,concat(convert(right(`cp`.`id_anhio`,2) using utf8mb3),left(`cp`.`cve_unidad`,1),`cp`.`cve_proyecto`,'-',`ca`.`cve_actividad`) AS `cve_actividad`,`ca`.`cx_nombre_actividad` AS `cx_nombre_actividad`,concat(convert(right(`cp`.`id_anhio`,2) using utf8mb3),'1',`cp`.`cve_proyecto`,'-',`ca`.`cve_actividad`,'-',`cpro`.`cve_producto`,'-','0',`mcCatego`.`cc_externa`,'-',`mcTipo`.`cc_externa`) AS `cve_producto`,`cpro`.`cx_nombre` AS `cx_nombre`,`mcCatego`.`cd_opcion` AS `categoria`,`mcTipo`.`cd_opcion` AS `tipo`,`mCalProd`.`ci_mes` AS `mes`,`mCalProd`.`ci_monto` AS `entregable` from ((((`met_cortoplazo_proyecto` `cp` join `met_validacion` `mv`) join `met_cortoplazo_actividad` `ca`) join ((`met_cortoplazo_producto` `cpro` left join `cat_master_catalogo` `mcCatego` on((`cpro`.`id_catalogo_categorizacion` = `mcCatego`.`id_catalogo`))) left join `cat_master_catalogo` `mcTipo` on((`cpro`.`id_catalogo_tipo_producto` = `mcTipo`.`id_catalogo`)))) join `met_producto_calendario` `mCalProd`) where ((`cp`.`it_semantica` = 1) and (`cp`.`cs_estatus` = 'O') and (`cp`.`id_validacion_supervisor` = `mv`.`id_validacion`) and (`mv`.`cs_estatus` = 'O') and (`cp`.`id_proyecto` = `ca`.`id_proyecto`) and (`ca`.`cs_estatus` <> 'B') and (`ca`.`id_actividad` = `cpro`.`id_actividad`) and (`cpro`.`cs_estatus` <> 'B') and (`mCalProd`.`id_producto` = `cpro`.`id_producto`) and (`mCalProd`.`ci_monto` > 0))